{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Infrastructure-as-Code preset - Terraform, Ansible, Packer with auto-merge policies and Monday scheduling",
  "extends": [
    "schedule:earlyMondays"
  ],
  "packageRules": [
    {
      "description": "Auto-merge Terraform provider patches",
      "matchManagers": ["terraform"],
      "matchUpdateTypes": ["patch"],
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group Ansible collection updates",
      "matchManagers": ["ansible", "ansible-galaxy"],
      "groupName": "ansible-collections",
      "groupSlug": "ansible",
      "matchUpdateTypes": ["patch", "minor"],
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Pin infrastructure tools for stability",
      "matchManagers": ["mise"],
      "matchPackageNames": ["terraform", "packer", "ansible-core"],
      "rangeStrategy": "pin"
    },
    {
      "description": "Require approval for major Terraform updates",
      "matchPackageNames": ["/terraform/"],
      "matchUpdateTypes": ["major"],
      "dependencyDashboardApproval": true
    },
    {
      "description": "Group Python dependencies",
      "matchCategories": ["python"],
      "groupName": "python-dependencies"
    }
  ]
}
