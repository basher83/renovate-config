{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Universal mise tooling preset - conservative updates for all tool versions",
  "packageRules": [
    {
      "description": "Pin critical infrastructure tools for stability",
      "matchManagers": ["mise"],
      "matchPackageNames": [
        "terraform",
        "opentofu",
        "packer",
        "ansible",
        "ansible-core",
        "kubectl",
        "helm"
      ],
      "rangeStrategy": "pin",
      "schedule": ["before 5am on Monday"],
      "groupName": "mise: Infrastructure Tools"
    },
    {
      "description": "Pin Python runtime versions",
      "matchManagers": ["mise"],
      "matchPackagePatterns": ["^python$", "^python@"],
      "rangeStrategy": "pin",
      "schedule": ["before 5am on Monday"],
      "groupName": "mise: Python Runtime"
    },
    {
      "description": "Pin Node.js runtime versions",
      "matchManagers": ["mise"],
      "matchPackagePatterns": ["^node$", "^nodejs$"],
      "rangeStrategy": "pin",
      "schedule": ["before 5am on Monday"],
      "groupName": "mise: Node.js Runtime"
    },
    {
      "description": "Auto-update utility tools (patch only)",
      "matchManagers": ["mise"],
      "excludePackageNames": [
        "terraform",
        "opentofu",
        "packer",
        "ansible",
        "ansible-core",
        "kubectl",
        "helm"
      ],
      "excludePackagePatterns": ["^python", "^node"],
      "matchUpdateTypes": ["patch"],
      "automerge": true,
      "automergeType": "branch",
      "schedule": ["before 5am on Monday"]
    },
    {
      "description": "Require approval for critical tool major updates",
      "matchManagers": ["mise"],
      "matchPackageNames": [
        "terraform",
        "opentofu",
        "packer",
        "ansible",
        "ansible-core",
        "python",
        "node",
        "kubectl",
        "helm"
      ],
      "matchUpdateTypes": ["major"],
      "dependencyDashboardApproval": true
    },
    {
      "description": "Label mise tool updates",
      "matchManagers": ["mise"],
      "addLabels": ["mise", "tooling"]
    }
  ]
}
